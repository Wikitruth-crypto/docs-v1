# 需求文档

## 项目概述

使用 Docusaurus 构建 WikiTruth 项目的静态文档站点，提供完整的技术文档展示和访问体验。

## 核心需求

### 1. 技术栈

- **框架**: Docusaurus 3.x
- **语言**: TypeScript
- **样式**: Tailwind CSS（基于现有 `marketing/globals.css` 的样式系统）
- **构建工具**: Docusaurus 内置构建系统

### 2. UI 风格要求

#### 2.1 主题样式
- 采用 shadcn dark 模式色彩系统
- 主题色：`--theme: #c6a9fc`
- 背景：黑色主题（`background: black`）
- 文字颜色：白色（`color: white`）
- 使用 `marketing/globals.css` 中定义的所有 CSS 变量和样式规则

#### 2.2 组件复用
- **Header**: 复用 `marketing/components/Header.tsx` 的设计和功能
  - Logo 品牌展示
  - 导航菜单（Home, Roadmap, Blog, Team, Docs）
  - Beta App 按钮
  - 响应式设计（移动端适配）
  
- **Footer**: 复用 `marketing/components/Footer.tsx` 的设计和功能
  - 品牌 Logo 和描述
  - 社交媒体链接（Twitter, Telegram, GitHub, Discord, Email, Share）
  - 版权信息和条款链接
  - 分享功能弹窗

#### 2.3 样式定制
- 需要将 React 组件（Header/Footer）适配为 Docusaurus 的 Swizzle 组件
- 保持 Tailwind CSS 类名和自定义 CSS 变量的兼容性
- 确保字体、间距、颜色等视觉元素与原 marketing 项目一致

### 3. 文档内容

#### 3.1 文档结构
- **源文件位置**: `guides/` 目录下的 Markdown 文件
- **侧边栏配置**: 基于 `sidebar.js` 中定义的分类结构
  - 简介与背景（4个文档）
  - 技术文档（3个文档）
  - 功能细节（5个文档）
  - Tokenomics（2个文档）
  - 未来计划（1个文档）
  - 治理与合规（3个文档）
  - 技术展望（4个文档）
  - 未来愿景与附录（4个文档）

#### 3.2 Markdown 特性
- 支持标准的 Markdown 语法
- 支持 frontmatter（title, description, sidebar 等）
- 支持图片引用（`public/` 目录下的资源）
- 支持代码块高亮
- 支持引用块（blockquote）

### 4. 多语言支持（i18n）

#### 4.1 语言配置
- **默认语言**: 中文（`zh`）
- **目标语言**: 英文（`en`）
- **URL 路径**: `/zh/docs/...` 和 `/en/docs/...`

#### 4.2 实现方式
- 使用 Docusaurus 内置 i18n 功能
- 文档按语言组织到不同目录（`docs/zh/`, `docs/en/`）
- 配置语言切换器组件
- 侧边栏和导航菜单需要支持多语言标签

#### 4.3 翻译策略
- 初始阶段：先实现中文版本
- 后续：将 `guides/` 中的文档翻译为英文，放置在 `docs/en/` 目录
- 需要翻译的内容包括：
  - 文档正文
  - 侧边栏标签
  - 导航菜单
  - UI 界面文案（Header、Footer 等）

### 5. 静态资源

#### 5.1 图片资源
- Logo: `public/logo/logo-1.svg`, `public/logo/logo-2.svg`
- 文档图片: `public/docs/` 目录下的所有图片文件
- Favicon: `public/favicon.svg`

#### 5.2 资源路径
- 静态资源统一放在 `static/` 目录（Docusaurus 约定）
- 需要将 `public/` 目录下的资源迁移或链接到 `static/` 目录

### 6. 功能需求

#### 6.1 必需功能
- ✅ 文档展示和导航
- ✅ 侧边栏目录导航
- ✅ 多语言切换
- ✅ 响应式设计（移动端、平板、桌面端）
- ✅ 深色主题（基于现有样式）
- ✅ 自定义 Header 和 Footer

#### 6.2 暂不实现
- ❌ 搜索功能（当前文档内容不复杂，暂不需要）
- ❌ 评论系统
- ❌ 版本管理

### 7. 项目结构

```
docs2/
├── docs/                    # Docusaurus 文档目录
│   ├── zh/                  # 中文文档
│   │   └── *.md
│   └── en/                  # 英文文档（后续添加）
│       └── *.md
├── src/                     # 源代码目录
│   ├── components/          # 自定义组件
│   │   ├── Header/          # Header 组件（适配自 marketing/components/Header.tsx）
│   │   └── Footer/          # Footer 组件（适配自 marketing/components/Footer.tsx）
│   ├── css/                 # 自定义样式
│   │   └── custom.css       # 基于 marketing/globals.css 的样式
│   └── theme/               # Docusaurus 主题定制
├── static/                  # 静态资源目录
│   ├── logo/                # Logo 文件
│   └── docs/                # 文档图片
├── marketing/               # 原有 marketing 项目（参考）
├── guides/                  # 原始文档源文件（参考）
├── sidebar.js               # 侧边栏配置（参考）
├── docusaurus.config.ts     # Docusaurus 配置文件
├── package.json             # 项目依赖
└── tsconfig.json            # TypeScript 配置
```

### 8. 开发步骤

#### 阶段 1: 项目初始化
1. 安装 Docusaurus 和相关依赖
2. 初始化 Docusaurus 项目结构
3. 配置 TypeScript 和 Tailwind CSS

#### 阶段 2: 样式集成
1. 将 `marketing/globals.css` 的样式迁移到 Docusaurus
2. 配置 Tailwind CSS
3. 确保 CSS 变量和主题色正确应用

#### 阶段 3: 组件适配
1. 将 Header 组件适配为 Docusaurus Navbar 组件
2. 将 Footer 组件适配为 Docusaurus Footer 组件
3. 处理路由和导航逻辑的差异（React Router vs Docusaurus Router）

#### 阶段 4: 文档迁移
1. 将 `guides/` 目录下的 Markdown 文件迁移到 `docs/zh/`
2. 配置侧边栏（基于 `sidebar.js`）
3. 测试文档渲染和导航

#### 阶段 5: 多语言配置
1. 配置 Docusaurus i18n
2. 实现语言切换器
3. 添加英文文档（后续）

#### 阶段 6: 测试和优化
1. 测试所有页面和功能
2. 优化性能和 SEO
3. 响应式设计测试

### 9. 技术难点

#### 9.1 组件适配
- React Router 的 `useNavigate`、`useLocation` 需要替换为 Docusaurus 的 `useHistory`、`useLocation`
- Link 组件需要使用 Docusaurus 的 `Link` 组件
- 需要处理路径前缀（baseUrl、locale）

#### 9.2 样式兼容
- Tailwind CSS 配置需要与 Docusaurus 兼容
- 确保自定义 CSS 变量在 Docusaurus 中正确加载
- 处理 Docusaurus 默认样式与自定义样式的冲突

#### 9.3 依赖处理
- `marketing/components` 中的组件可能依赖其他工具库（如 antd）
- 需要评估这些依赖是否需要在 Docusaurus 项目中保留
- 可能需要重写部分组件以避免不必要的依赖

### 10. 依赖清单

#### 核心依赖
- `@docusaurus/core`: Docusaurus 核心库
- `@docusaurus/preset-classic`: Docusaurus 经典预设
- `@docusaurus/theme-classic`: Docusaurus 经典主题
- `react`: React 库
- `react-dom`: React DOM 库

#### 样式相关
- `tailwindcss`: Tailwind CSS
- `autoprefixer`: CSS 自动前缀
- `postcss`: CSS 处理工具

#### TypeScript
- `typescript`: TypeScript 编译器
- `@types/react`: React TypeScript 类型定义
- `@types/react-dom`: React DOM TypeScript 类型定义

#### 其他可能需要的依赖
- `clsx`: 条件类名工具（如果组件中使用了）
- 其他 Header/Footer 组件中使用的依赖（需要根据实际情况添加）

### 11. 配置要求

#### 11.1 Docusaurus 配置
- `baseUrl`: `/` 或根据部署路径设置
- `title`: WikiTruth Docs
- `tagline`: 基于 Oasis Sapphire 的隐私证据市场文档
- `favicon`: `static/favicon.svg`
- `i18n`: 配置中文和英文
- `themeConfig`: 配置导航栏、页脚、侧边栏等

#### 11.2 Tailwind CSS 配置
- 需要配置 `content` 路径，包含 Docusaurus 的组件目录
- 需要保留 `marketing/globals.css` 中的所有自定义配置

### 12. 后续优化（可选）

- 添加搜索功能（Algolia DocSearch 或本地搜索）
- 添加文档版本管理
- 添加文档统计和 Analytics
- 添加评论系统
- 优化 SEO
- 添加 PWA 支持
