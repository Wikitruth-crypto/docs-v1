"use strict";(globalThis.webpackChunkwikitruth_docs=globalThis.webpackChunkwikitruth_docs||[]).push([[572],{3446(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var s=r(4848),t=r(8453);const i={title:"\u5b89\u5168\u4e0e\u4fe1\u4efb",description:"\u7528\u6237\u9690\u79c1\u4fdd\u62a4\u3001\u6570\u636e\u5b8c\u6574\u6027\u4e0e\u4e3b\u7f51/\u6d4b\u8bd5\u7f51\u6388\u6743\u7b56\u7565\u3002",sidebar:{order:7}},d=void 0,c={id:"security",title:"\u5b89\u5168\u4e0e\u4fe1\u4efb",description:"\u7528\u6237\u9690\u79c1\u4fdd\u62a4\u3001\u6570\u636e\u5b8c\u6574\u6027\u4e0e\u4e3b\u7f51/\u6d4b\u8bd5\u7f51\u6388\u6743\u7b56\u7565\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/security.md",sourceDirName:".",slug:"/security",permalink:"/zh/docs/security",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"\u5b89\u5168\u4e0e\u4fe1\u4efb",description:"\u7528\u6237\u9690\u79c1\u4fdd\u62a4\u3001\u6570\u636e\u5b8c\u6574\u6027\u4e0e\u4e3b\u7f51/\u6d4b\u8bd5\u7f51\u6388\u6743\u7b56\u7565\u3002",sidebar:{order:7}},sidebar:"docs",previous:{title:"\u9690\u79c1\u4ee3\u5e01",permalink:"/zh/docs/secret-token"},next:{title:"\u771f\u76f8\u76d2\u5b50\uff08Truth Box\uff09",permalink:"/zh/docs/truth-box"}},o={},l=[{value:"\u7528\u6237\u9690\u79c1\u4fdd\u62a4",id:"\u7528\u6237\u9690\u79c1\u4fdd\u62a4",level:3},{value:"UserId\u5408\u7ea6",id:"userid\u5408\u7ea6",level:4},{value:"\u6570\u636e\u5b89\u5168",id:"\u6570\u636e\u5b89\u5168",level:3}];function u(e){const n={blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"\u7528\u6237\u9690\u79c1\u4fdd\u62a4",children:"\u7528\u6237\u9690\u79c1\u4fdd\u62a4"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9690\u85cfaddress"}),"\uff1a\u534f\u8bae\u4ea4\u4e92\u57fa\u4e8e\u94b1\u5305\u5730\u5740\u4e0e ",(0,s.jsx)(n.code,{children:"UserId"})," \u6620\u5c04\uff0c\u5728\u4e8b\u4ef6\u65e5\u5fd7\u4e2d\u4e0d\u4f1a\u66b4\u9732\u94b1\u5305\u5730\u5740\uff0c\u800c\u4ee5 ",(0,s.jsx)(n.code,{children:"UserId"})," \u4ee3\u66ff\uff0c\u964d\u4f4e\u94fe\u4e0a\u5173\u8054\u6027\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SIWE \u6743\u9650\u9a8c\u8bc1"}),"\uff1a\u8bfb\u53d6\u91cd\u8981\u6570\u636e\u9700\u901a\u8fc7\u94b1\u5305\u7b7e\u540d SIWE \u4ee4\u724c\uff0c\u5408\u7ea6\u5e76\u4e0d\u63d0\u4f9b\u5730\u5740\u53c2\u6570\u8bbf\u95ee\u51fd\u6570\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4e3b\u7f51\u6388\u6743\u6a21\u5f0f"}),"\uff1a\u4e3b\u7f51\u4e0a\u7ebf\u540e\u5c06\u5168\u9762\u91c7\u7528 EIP-712 \u7b7e\u540d\u6388\u6743\u4ea4\u4e92\uff0c\u51cf\u5c11\u94fe\u4e0a\u53ef\u89c1\u884c\u4e3a\uff1b"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"userid\u5408\u7ea6",children:"UserId\u5408\u7ea6"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",children:"mapping(address => uint256) internal _userIds;\nuint256 internal _currentUserId;\n    \nconstructor(address addrManager_) Modifier(addrManager_) {\n    _currentUserId = 10000;\n}\n/**\n  * @dev Get my user id\n  * @param token_ SIWE token\n  */\nfunction myUserId(bytes memory token_) public view returns (uint256) {\n\n    address sender = msg.sender;\n    if (sender == address(0)) {\n        sender = ISiweAuth(SIWE_AUTH).getMsgSender(token_);\n    }\n    if (_blacklist[sender]) revert Blacklisted();\n    return _userIds[sender];\n}\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u6d4b\u8bd5\u7f51\u7b56\u7565: \u6d4b\u8bd5\u7f51\u4fdd\u7559\u76f4\u63a5\u4ea4\u4e92\u4ee5\u4fbf\u8c03\u8bd5\u4e0e\u9a8c\u8bc1\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6570\u636e\u5b89\u5168",children:"\u6570\u636e\u5b89\u5168"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6587\u4ef6\u7c89\u788e\u5b58\u50a8"}),"\uff1a\u5c06\u6587\u4ef6\u5207\u7247\u7c89\u788e\u540e\uff0c\u5206\u6563\u5b58\u50a8\u4e8e IPFS/Arweave\uff0c\u9700\u8981\u5b8c\u6574\u7684\u6587\u4ef6\u624d\u80fd\u62fc\u63a5\u8fd8\u539f\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7aef\u5230\u7aef\u52a0\u5bc6"}),"\uff1a\u6587\u4ef6\u5206\u6563\u5b58\u50a8\u4fe1\u606f\uff08CID\u548cpassword\uff09\u5728\u672c\u5730\u4ee5\u5bf9\u79f0\u52a0\u5bc6\uff08\u5982 AES-256-GCM\uff09\u5904\u7406\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u94fe\u4e0a\u5bc6\u94a5\u5c01\u88c5"}),"\uff1a\u89e3\u5bc6\u5bc6\u94a5\u5728 Sapphire TEE \u5185\u52a0\u5bc6\u5b58\u50a8\uff0c\u4ec5\u6388\u6743\u7528\u6237\u53ef\u89e3\u5bc6\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u516c\u5f00\u5143\u6570\u636e"}),"\uff1aTruthBox \u7684\u5143\u6570\u636e\u6587\u4ef6\u5b8c\u5168\u516c\u5f00\uff0c\u4f46\u53ea\u5305\u542b\u89e3\u5bc6\u516c\u94a5\u548c\u6587\u4ef6\u7c89\u788e\u5b58\u50a8\u4fe1\u606f\u52a0\u5bc6\u540e\u7684\u6570\u636e\uff0c\u4fbf\u4e8e\u9a8c\u8bc1\u4e0e\u7d22\u5f15\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u673a\u5bc6\u5185\u5bb9\u5728 Sapphire \u4e0a\u4ee5\u52a0\u5bc6\u5f62\u6001\u5b58\u5728\uff0c\u914d\u5408 SIWE + EIP-712\uff0c\u65e2\u4fdd\u8bc1\u9690\u79c1\uff0c\u53c8\u4fdd\u6301\u53ef\u9a8c\u8bc1\u4e0e\u53ef\u5ba1\u8ba1\u7684\u94fe\u4e0a\u89c4\u5219\u3002"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453(e,n,r){r.d(n,{R:()=>d,x:()=>c});var s=r(6540);const t={},i=s.createContext(t);function d(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);